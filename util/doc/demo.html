<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jQuery dialog || itour.ui.dialog demo 说明</title>



<!-- syntaxhighlighter -->
<link href="../../asset/styles/shCore.css" rel="stylesheet" />
<link href="../../asset/styles/shThemeDefault.css" rel="stylesheet" />





<script src="../../asset/scripts/shCore.js"></script>
<script src="../../asset/scripts/shBrushJScript.js"></script>
<script src="../../asset/scripts/shBrushXml.js"></script>
<!-- <script src="../../asset/scripts/shBrushCss.js"></script> -->

<script type="text/javascript">
  // syntaxhighlighter
  SyntaxHighlighter.config.clipboardSwf = '../../asset/scripts/clipboard.swf';
  SyntaxHighlighter.all();
</script>
<!-- syntaxhighlighter -->

<script src="../../asset/jquery.js"></script>


<script src="../../style/scripts/demo_ui.js"></script>
<link rel="stylesheet" href="../../style/css/ui_demo.css">
</head>

<body>

<div id="wrapper">  



<div id="title">
<h1> Util</h1>
</div>





  <h2 id="json"><span>JSON</span></h2>
  <pre class="brush: js;">
     // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON
    if (!window.JSON) {
      window.JSON = {
        parse: function (sJSON) { return eval("(" + sJSON + ")"); },
        stringify: function (vContent) {
          if (vContent instanceof Object) {
            var sOutput = "";
            if (vContent.constructor === Array) {
              for (var nId = 0; nId < vContent.length; sOutput += this.stringify(vContent[nId]) + ",", nId++);
              return "[" + sOutput.substr(0, sOutput.length - 1) + "]";
            }
            if (vContent.toString !== Object.prototype.toString) { return "\"" + vContent.toString().replace(/"/g, "\\$&") + "\""; }
            for (var sProp in vContent) { sOutput += "\"" + sProp.replace(/"/g, "\\$&") + "\":" + this.stringify(vContent[sProp]) + ","; }
            return "{" + sOutput.substr(0, sOutput.length - 1) + "}";
          }
          return typeof vContent === "string" ? "\"" + vContent.replace(/"/g, "\\$&") + "\"" : String(vContent);
        }
      };
    }



  </pre>

  <h2 id="json"><span>tmpl</span></h2>
  <pre class="brush: js;">

/**
 * jq.web.template - a javascript template library
 * Templating from John Resig - http://ejohn.org/ - MIT Licensed
 * url： http://ejohn.org/blog/javascript-micro-templating/
 *  ~fork and added support comment
 */
;(function($,window) {

    $.template = function(tmpl, data) {
        return (template(tmpl, data));
    };

    $.tmpl = function(tmpl, data) {
        return $(template(tmpl, data));
    };
    var template = function(str, data) {
        //If there's no data, let's pass an empty object so the user isn't forced to.
        if (!data)
            data = {};
        return tmpl(str, data);
    };
    ;(function() {
        var cache = {};
        this.tmpl = function tmpl(str, data) { 
            // Figure out if we're getting a template, or if we need to
            // load the template - and be sure to cache the result.
            var fn = !/\W/.test(str) ?
                cache[str] = cache[str] ||
                tmpl(document.getElementById(str).innerHTML):
            // Generate a reusable function that will serve as a template
            // generator (and which will be cached).
            new Function("obj",
                "var p=[],print=function(){p.push.apply(p,arguments);};" +
            // Introduce the data as local variables using with(){}
            "with(obj){p.push('" +
            // Convert the template into pure JavaScript
            str
                .replace(/\/\/[\s\S]*?\n/g, " ") // comment 
                .replace(/<!--[\s\S]*?-->/g, " ") // comment    
                .replace(/\/\*[\s\S]*?\*\//g, " ") // comment 
                .replace(/[\r\t\n]/g, " ")
                .split("<%").join("\t")
                .replace(/((^|%>)[^\t]*)'/g, "$1\r")
                .replace(/\t=(.*?)%>/g, "',$1,'")
                .split("\t").join("');")
                .split("%>").join("p.push('")
                .split("\r").join("\\'") + "');} return p.join('')"+
                ".replace("+ new RegExp("(\\>)[\\s\\r\\t]+(\\<)","g") +",'$1$2');"
                );
            // Provide some basic currying to the user
            return data ? fn(data) : fn;
        };

    })();
})(jQuery,window);



  </pre>

  <h2 id="dataFormat" ><span >dataFormat</span></h2>

  <pre class="brush: js;">

    String.prototype.repeat = function(n) {
        var n = n || 1;
        return Array(n + 1).join(this);
    };


    String.prototype.fillLength = function(l, ch, isRight){
        var source;
        if ((source = String(this)).length < l) {
                var ar = new Array(l - source.length);
                ar[isRight ? 'unshift' : 'push'](source);
                source = ar.join(ch || '0');
        }
        return source;
    };

    Date.prototype.format = function(str) {
        var fn = this;
        var lang ='zh-CN',
            wk = {
                'en':['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                "zh-CN":['日', '一', '二', '三', '四', '五', '六']
            }, 
            map={y:"getYear",Y:"getFullYear",M:"getMonth",d:"getDate",h:"getHours",m:"getMinutes",s:"getSeconds",D:"getDay"};

        var val,p1f;
        var _re =  /([yYMdhmsD]{1,4})/g;
        return str.replace(_re,function(match,p1,offset,s){
            p1f = p1.charAt(0);
            if(!map[p1f]) return match;
            val = fn[map[p1f]]();
            p1f == 'y' && (val %= 100);
            (p1f.toLowerCase() == 'y') && (p1.length == 4) && (val = fn[map['Y']]())
            p1f == 'M' && val++;
            p1f == 'D' && (val = wk[lang][val]);
            return val < 10 && p1.length > 1 ? String(val).fillLength(2) : String(val);
        })
    }



  </pre>


  <h2 id="docfire" ><span >docfire</span></h2>

  <pre class="brush: js;">
    /**
     * 点击 页面任何一个位置关闭 窗体
     * @param  {[String || Array]}   hidelist 不能点击的元素
     * @param  {Function} callback   回调函数  event::ev 事件对象,  
     *                                         string::'mouseup.'+(new Date).getTime() 用于解除绑定
     */
    function docfire(hidelist, callback) { 

        var plist = typeof hidelist == "string" ? hidelist.split(0) : hidelist;

        function checkin(etg, list) {
            var k = 1,
                p = list;
            for (var i = 0; i < p.length; i++) {
                var nodelist = !$(etg.target).closest(p[i]).length;
                if (!nodelist) {
                    return 0;
                }
                k = nodelist && k;
            };
            return k;
        }
        var time = (new Date).getTime();
        var hash = 'mouseup.' + time;
        $(document).bind(hash, function(e) {
            var ev = e;
            if (checkin(ev, plist)) {
                if (typeof callback != undefined && a.isFunction(callback)) {
                    callback.call(this, ev, hash);
                } else {
                    for (var i = 0; i < plist.length; i++) {
                        $(plist[i]).hide();
                    };
                }
            }
        })
    }



  </pre>




</div>


</body>
</html>
